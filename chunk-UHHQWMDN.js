import{d as c}from"./chunk-RSNRSOZE.js";import{o as l}from"./chunk-PS44NW6G.js";import{U as s,Y as a,ba as r,k as n}from"./chunk-2BVFNTRB.js";var m=(()=>{let t=class t{constructor(i,e){this.http=i,this.router=e,this.apiUrl="https://sazanowine-api-dev.azurewebsites.net/api/identity",this.loggedInStatus=new n(this.checkToken())}registerUser(i){return this.http.post(`${this.apiUrl}/register`,i)}loginUser(i){return this.http.post(`${this.apiUrl}/login`,i).pipe(s(e=>{e&&e.token&&(localStorage.setItem("token",e.token),this.loggedInStatus.next(!0))}))}logout(){localStorage.removeItem("token"),this.loggedInStatus.next(!1),this.router.navigate(["/"])}isLoggedIn(){return this.loggedInStatus.asObservable()}checkToken(){return!!localStorage.getItem("token")}};t.\u0275fac=function(e){return new(e||t)(r(l),r(c))},t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();export{m as a};
