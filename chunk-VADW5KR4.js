import{a as G}from"./chunk-SY4Q7D4V.js";import{a as N,b as g,c as M,d as B,f as O,g as q,h as T,i as w,n as D,p as U}from"./chunk-LSYD3J5U.js";import{a as V,b as j}from"./chunk-YPQRJK4A.js";import{a as k}from"./chunk-Z32L4CPR.js";import"./chunk-OKL6TN3N.js";import"./chunk-JJN6UOWY.js";import"./chunk-WH2QT74X.js";import{b as L}from"./chunk-4ULCVYXL.js";import{c as b,d as F}from"./chunk-CKQWD7NW.js";import{Cb as l,Db as _,Eb as u,Lb as I,Oa as n,Ob as o,Pa as v,Pb as s,_a as y,ab as t,cb as f,e as P,eb as h,fa as S,ib as a,jb as r,kb as c,sb as E}from"./chunk-MOSC54PF.js";function A(i,p){i&1&&(a(0,"small",2),l(1),o(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(2,2,"auth.required-field")," "))}function z(i,p){i&1&&(a(0,"small",2),l(1),o(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(2,2,"auth.required-field")," "))}function R(i,p){i&1&&(a(0,"div",12),l(1),o(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(2,2,"profile.email-danger-alert")," "))}function H(i,p){i&1&&(a(0,"small",2),l(1),o(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(2,2,"auth.required-field")," "))}function J(i,p){i&1&&(a(0,"small",2),l(1),o(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(2,2,"auth.email-invalid")," "))}function K(i,p){i&1&&(a(0,"small",2),l(1),o(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(2,2,"auth.required-field")," "))}function Q(i,p){i&1&&(a(0,"small",2),l(1),o(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(2,2,"auth.phone-invalid")," "))}var te=(()=>{let p=class p{constructor(m,d,e,C){this.fb=m,this.authService=d,this.profileService=e,this.storageService=C,this.subscription=new P}ngOnInit(){this.getUserInfo(),this.initProfileForm()}ngOnDestroy(){this.subscription.unsubscribe()}onSubmit(){if(this.profileForm.valid){let m={name:this.profileForm.get("name")?.value,surName:this.profileForm.get("surname")?.value,phoneNumber:this.profileForm.get("phone")?.value,email:this.profileForm.get("email")?.value};this.profileService.setUserInfo(m),this.storageService.setUserData(m),this.subscription.add(this.profileService.updateUserInfo(m).subscribe())}}get name(){return this.profileForm.get("name")}get userSurname(){return this.profileForm.get("surname")}get userPhone(){return this.profileForm.get("phone")}get userEmail(){return this.profileForm.get("email")}initProfileForm(){this.profileForm=this.fb.group({name:[this.userName,g.required],surname:[this.surname,g.required],email:[this.email,[g.required,g.email]],phone:[this.phone,[g.required,G]]})}getUserInfo(){let m=this.authService.decodeToken(),d=this.storageService.getUserData();d?(this.userName=d.userName,this.surname=d.userSurname,this.email=d.userEmail,this.phone=d.userPhone):(this.userName=m.name,this.surname=m.surName,this.email=m.email,this.phone=m.phoneNumber)}};p.\u0275fac=function(d){return new(d||p)(v(D),v(k),v(V),v(j))},p.\u0275cmp=S({type:p,selectors:[["app-profile-info"]],standalone:!0,features:[I],decls:38,vars:40,consts:[[1,"wrapper"],[1,"mobile-hr"],[3,"appLangClass"],[1,"desktop-hr"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name",3,"appLangClass"],["type","text","id","name","formControlName","name",1,"form-control","eng-secondary"],["for","surname",3,"appLangClass"],["type","text","id","surname","formControlName","surname",1,"form-control","eng-secondary"],["for","email",3,"appLangClass"],["type","email","id","email","formControlName","email",1,"form-control","eng-secondary"],["role","alert",1,"alert","alert-danger",3,"appLangClass"],["for","phone",3,"appLangClass"],["type","number","id","phone","formControlName","phone",1,"form-control","eng-primary"],["type","submit",1,"primary-btn",3,"appLangClass"]],template:function(d,e){d&1&&(a(0,"div",0),c(1,"hr",1),a(2,"h5",2),l(3),o(4,"translate"),r(),c(5,"hr",3),a(6,"form",4),E("ngSubmit",function(){return e.onSubmit()}),a(7,"div",5)(8,"label",6),l(9),o(10,"translate"),r(),c(11,"input",7),y(12,A,3,4,"small",2),r(),a(13,"div",5)(14,"label",8),l(15),o(16,"translate"),r(),c(17,"input",9),y(18,z,3,4,"small",2),r(),a(19,"div",5)(20,"label",10),l(21),o(22,"translate"),r(),c(23,"input",11),y(24,R,3,4,"div",12)(25,H,3,4,"small",2)(26,J,3,4,"small",2),r(),a(27,"div",5)(28,"label",13),l(29),o(30,"translate"),r(),c(31,"input",14),y(32,K,3,4,"small",2)(33,Q,3,4,"small",2),r(),a(34,"button",15)(35,"span"),l(36),o(37,"translate"),r()()()()),d&2&&(n(2),t("appLangClass","geo-primary, eng-primary, ru-primary"),n(),u(" ",s(4,28,"profile.account-info")," "),n(3),t("formGroup",e.profileForm),n(2),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),_(s(10,30,"auth.name")),n(2),f("is-invalid",(e.name==null?null:e.name.touched)&&(e.name==null?null:e.name.invalid)),n(),h(e.name!=null&&e.name.touched&&(!(e.name==null||e.name.errors==null)&&e.name.errors.required)?12:-1),n(2),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(16,32,"auth.surname")," "),n(2),f("is-invalid",(e.userSurname==null?null:e.userSurname.touched)&&(e.userSurname==null?null:e.userSurname.invalid)),n(),h(e.userSurname!=null&&e.userSurname.touched&&(!(e.userSurname==null||e.userSurname.errors==null)&&e.userSurname.errors.required)?18:-1),n(2),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(22,34,"auth.email")," "),n(2),f("is-invalid",((e.userEmail==null?null:e.userEmail.touched)||(e.userEmail==null?null:e.userEmail.dirty))&&(e.userEmail==null?null:e.userEmail.invalid)),n(),h(e.userEmail!=null&&e.userEmail.touched?24:-1),n(),h(e.userEmail!=null&&e.userEmail.touched&&(!(e.userEmail==null||e.userEmail.errors==null)&&e.userEmail.errors.required)?25:e.userEmail!=null&&e.userEmail.dirty&&(!(e.userEmail==null||e.userEmail.errors==null)&&e.userEmail.errors.email)?26:-1),n(3),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),u(" ",s(30,36,"auth.phone")," "),n(2),f("is-invalid",((e.userPhone==null?null:e.userPhone.touched)||(e.userPhone==null?null:e.userPhone.dirty))&&(e.userPhone==null?null:e.userPhone.invalid)),n(),h(e.userPhone!=null&&e.userPhone.touched&&(!(e.userPhone==null||e.userPhone.errors==null)&&e.userPhone.errors.required)?32:e.userPhone!=null&&e.userPhone.dirty&&(!(e.userPhone==null||e.userPhone.errors==null)&&e.userPhone.errors.invalidGeorgianPhone)?33:-1),n(2),f("is-disabled",e.profileForm.invalid),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(2),u(" ",s(37,38,"auth.save")," "))},dependencies:[U,O,N,q,M,B,T,w,L,F,b],styles:["h5[_ngcontent-%COMP%]{font-size:18px}.desktop-hr[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 1024px){form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:40%}form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:40%}form[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]{margin-top:20px}.desktop-hr[_ngcontent-%COMP%]{display:block}.mobile-hr[_ngcontent-%COMP%]{display:none}}@media screen and (min-width: 1920px){h5[_ngcontent-%COMP%]{font-size:25px}}"]});let i=p;return i})();export{te as ProfileInfoComponent};
