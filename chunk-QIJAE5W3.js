import{a as l}from"./chunk-OKL6TN3N.js";import{t as c}from"./chunk-WH2QT74X.js";import{M as a,V as r,Z as p,a as h,ca as n,k as d}from"./chunk-MOSC54PF.js";var b=(()=>{let t=class t{storeOrders(e){this.ordersSubject.next(e)}constructor(e,i){this.http=e,this.loadingService=i,this.apiUrl="https://sazanowine-api-dev.azurewebsites.net/api",this.ordersSubject=new d([]),this.orders$=this.ordersSubject.asObservable()}addOrder(e){return this.loadingService.show(),this.http.post(`${this.apiUrl}/orders`,e).pipe(r({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))}getUserOrders(){return this.loadingService.show(),this.http.get(`${this.apiUrl}/identity/userOrders`).pipe(r({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))}getAllOrders(){return this.loadingService.show(),this.http.get(`${this.apiUrl}/orders`).pipe(r(()=>{}),a(()=>{this.loadingService.hide()}))}updateOrderStatus(e,i){return this.loadingService.show(),this.http.patch(`${this.apiUrl}/orders/${e}`,i).pipe(r(()=>{let u=this.ordersSubject.getValue().map(o=>o.id===e?h(h({},o),i):o);this.ordersSubject.next(u)}),a(()=>{this.loadingService.hide()}))}};t.\u0275fac=function(i){return new(i||t)(n(c),n(l))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();export{b as a};
