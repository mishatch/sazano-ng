import{a as V}from"./chunk-4WFZDXZW.js";import{m as L}from"./chunk-WUZAT2ZT.js";import{a as M}from"./chunk-AMA53F6H.js";import"./chunk-Q5DRH6IR.js";import{a as F}from"./chunk-4GGUQINZ.js";import{l as T}from"./chunk-VJDHYPGB.js";import{c as B,d as k}from"./chunk-2AIMIJSB.js";import{Cb as r,Db as p,Eb as h,Lb as y,Oa as d,Ob as l,Pa as _,Pb as c,Qb as A,_a as f,e as C,eb as x,fa as g,fb as v,gb as b,hb as O,ib as t,jb as i,kb as w,lb as I,qa as D,ra as E,sb as S,tb as m}from"./chunk-PT4IFWSI.js";function $(n,o){n&1&&r(0," \u10E8\u10D4\u10E1\u10E0\u10E3\u10DA\u10D4\u10D1\u10D4\u10DA\u10D8 \u10E8\u10D4\u10D9\u10D5\u10D4\u10D7\u10D4\u10D1\u10D8 \u10D0\u10E0 \u10D0\u10E0\u10D8\u10E1 ")}function j(n,o){if(n&1){let s=I();t(0,"tr")(1,"td",3),r(2),l(3,"date"),i(),t(4,"td",4),r(5," \u10E8\u10D4\u10E1\u10E0\u10E3\u10DA\u10D4\u10D1\u10E3\u10DA\u10D8 "),i(),t(6,"td",3),r(7),i(),t(8,"td")(9,"button",5),S("click",function(){let e=D(s).$implicit,u=m(2);return E(u.viewOrderDetails(e))}),t(10,"span"),r(11),l(12,"translate"),i()()(),t(13,"td")(14,"button",5),S("click",function(){let e=D(s).$implicit,u=m(2);return E(u.changeOrderStatus(e.id))}),t(15,"span"),r(16," \u10E8\u10D4\u10E1\u10D0\u10E1\u10E0\u10E3\u10DA\u10D4\u10D1\u10DA\u10D0\u10D3 \u10DB\u10DD\u10DC\u10D8\u10E8\u10D5\u10DC\u10D0 "),i()()()()}if(n&2){let s=o.$implicit;d(2),p(A(3,3,s.orderDate,"M/d/yy")),d(5),h(" ",s.orderPrice," \u20BE "),d(4),h(" ",c(12,6,"orders.order-details")," ")}}function N(n,o){if(n&1&&(t(0,"table",1)(1,"thead")(2,"tr")(3,"th",2),r(4),l(5,"translate"),i(),t(6,"th",2),r(7),l(8,"translate"),i(),t(9,"th",2),r(10),l(11,"translate"),i(),t(12,"th",2),r(13),l(14,"translate"),i(),t(15,"th",2),r(16,"\u10E1\u10E2\u10D0\u10E2\u10E3\u10E1\u10D8\u10E1 \u10E8\u10D4\u10EA\u10D5\u10DA\u10D0"),i()()(),t(17,"tbody"),b(18,j,17,8,"tr",null,v),i()()),n&2){let s=m();d(4),p(c(5,4,"orders.order-date")),d(3),p(c(8,6,"orders.order-status")),d(3),p(c(11,8,"orders.order-total")),d(3),p(c(14,10,"orders.order-details")),d(5),O(s.completedOrders)}}function R(n,o){n&1&&w(0,"app-loading")}var X=(()=>{let o=class o{constructor(a,e){this.orderService=a,this.modalService=e,this.completedOrders=[],this.isLoading=!1,this.subscription=new C}ngOnInit(){this.getSentOrders()}ngOnDestroy(){this.subscription.unsubscribe()}viewOrderDetails(a){let e=this.modalService.open(V,{centered:!0});e.componentInstance.order=a}changeOrderStatus(a){let u={status:"Pending"};this.isLoading=!0,this.subscription.add(this.orderService.updateOrderStatus(a,u).subscribe(()=>{this.getSentOrders(),this.isLoading=!1},P=>{console.log("Error updating order status:",P),this.isLoading=!1}))}getSentOrders(){this.subscription.add(this.orderService.orders$.subscribe(a=>{this.completedOrders=a.filter(e=>e.status==="Sent")}))}};o.\u0275fac=function(e){return new(e||o)(_(M),_(L))},o.\u0275cmp=g({type:o,selectors:[["app-completed-orders"]],standalone:!0,features:[y],decls:6,vars:2,consts:[[1,"wrapper"],[1,"table","table-striped"],["scope","col"],[1,"align-middle"],[1,"align-middle","text-success"],[1,"primary-btn",3,"click"]],template:function(e,u){e&1&&(t(0,"div",0)(1,"h5"),r(2," \u10E8\u10D4\u10E1\u10E0\u10E3\u10DA\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E8\u10D4\u10D9\u10D5\u10D4\u10D7\u10D4\u10D1\u10D8 "),i(),f(3,$,1,0)(4,N,20,12,"table",1),i(),f(5,R,1,0,"app-loading")),e&2&&(d(3),x(u.completedOrders.length===0?3:4),d(2),x(u.isLoading?5:-1))},dependencies:[T,k,B,F]});let n=o;return n})();export{X as CompletedOrdersComponent};
