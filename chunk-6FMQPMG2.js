import{a as I}from"./chunk-24W4KFJV.js";import{a as w,b as c,c as P,d as U,f as O,g as k,h as Y,k as F,p as Q,r as T}from"./chunk-SA34UV6Y.js";import"./chunk-SHF2QPEZ.js";import{c as A,e as S}from"./chunk-H3Z4EEUF.js";import"./chunk-Y6STU5OE.js";import"./chunk-UW3LFFGE.js";import{d as W}from"./chunk-AKL4WKOJ.js";import{Db as l,Fb as v,Ja as y,Mb as b,Oa as t,Pa as f,_a as D,ab as E,cb as p,e as h,eb as o,fa as _,ib as u,jb as n,kb as s,sb as M,tb as g}from"./chunk-FZWOQZIM.js";function N(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n())}function q(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n())}function B(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n(),s(2,"br"))}function j(i,a){i&1&&(u(0,"small"),l(1,"\u10E4\u10D0\u10E1\u10D8 \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 0-\u10D6\u10D4 \u10DB\u10D4\u10E2\u10D8"),n())}function V(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n(),s(2,"br"))}function G(i,a){i&1&&(u(0,"small"),l(1,"\u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0 \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 0-\u10D6\u10D4 \u10DB\u10D4\u10E2\u10D8"),n())}function R(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n(),s(2,"br"))}function z(i,a){i&1&&(u(0,"small"),l(1,"\u10DA\u10D8\u10DC\u10D9\u10D8 \u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8\u10D0"),n())}function L(i,a){if(i&1&&(u(0,"div",15),l(1),n()),i&2){let d=g();t(),v(" ",d.errorMessage," ")}}function H(i,a){if(i&1&&(u(0,"div",16),l(1),n()),i&2){let d=g();t(),v(" ",d.successMessage," ")}}function J(i,a){if(i&1&&s(0,"img",20),i&2){let d=g();E("src",d.imageUrl==null?null:d.imageUrl.value,y)}}function K(i,a){if(i&1&&(u(0,"p",23),l(1),n()),i&2){let d=g();t(),v(" ",d.vintageYear==null?null:d.vintageYear.value," ")}}function X(i,a){i&1&&(u(0,"p",24),l(1," \u10E1\u10D0\u10D6\u10D0\u10DC\u10DD\u10E1 \u10E6\u10D5\u10D8\u10DC\u10DD "),n())}function Z(i,a){if(i&1&&(u(0,"p",22),l(1),n()),i&2){let d=g();t(),v(" ",d.price==null?null:d.price.value," \u20BE ")}}var re=(()=>{let a=class a{constructor(m,r,e,C){this.fb=m,this.wineService=r,this.route=e,this.router=C,this.successMessage=null,this.errorMessage=null,this.editMode=!1,this.wineId=null,this.subscription=new h}ngOnInit(){this.initAddWineForm(),this.checkEditMode()}ngOnDestroy(){this.subscription.unsubscribe()}onSubmit(){if(this.addWineForm.valid){this.successMessage=null,this.errorMessage=null;let m=this.addWineForm.value;this.editMode&&this.wineId?this.subscription.add(this.wineService.updateWine(this.wineId,m).subscribe(()=>{this.successMessage="Wine updated successfully!",this.router.navigate(["/admin-products"])},r=>{this.errorMessage="Error updating wine. Please try again.",console.log(r)})):this.subscription.add(this.wineService.addWine(m).subscribe(()=>{this.successMessage="Wine added successfully!",this.initAddWineForm()},r=>{this.errorMessage="Error adding wine. Please try again.",console.log(r)}))}}get name(){return this.addWineForm.get("name")}get vintageYear(){return this.addWineForm.get("vintageYear")}get stockQuantity(){return this.addWineForm.get("stockQuantity")}get price(){return this.addWineForm.get("price")}get imageUrl(){return this.addWineForm.get("imageUrl")}initAddWineForm(){this.addWineForm=this.fb.group({name:["",c.required],vintageYear:["",c.required],stockQuantity:["",[c.required,c.min(1)]],price:["",[c.required,c.min(1)]],description:[""],imageUrl:["",c.required]})}checkEditMode(){this.subscription.add(this.route.paramMap.subscribe(m=>{let r=m.get("id");r&&(this.editMode=!0,this.wineId=+r,this.loadWineData(this.wineId))}))}loadWineData(m){this.subscription.add(this.wineService.getWineById(m).subscribe(r=>{this.addWineForm.patchValue({name:r.name,vintageYear:r.vintageYear,stockQuantity:r.stockQuantity,price:r.price,description:r.description,imageUrl:r.imageUrl})}))}};a.\u0275fac=function(r){return new(r||a)(f(Q),f(I),f(A),f(S))},a.\u0275cmp=_({type:a,selectors:[["app-add-wine"]],standalone:!0,features:[b],decls:48,vars:28,consts:[[1,"wrapper","geo-secondary"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","formControlName","name","id","name",1,"form-control"],["for","year"],["type","number","formControlName","vintageYear","id","year",1,"form-control"],["for","price"],["type","number","formControlName","price","id","price",1,"form-control"],["for","quantity"],["type","number","formControlName","stockQuantity","id","quantity",1,"form-control"],["for","imageUrl"],["type","text","formControlName","imageUrl","id","imageUrl",1,"form-control"],["for","description"],["formControlName","description","id","description","rows","3",1,"form-control"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["type","submit",1,"primary-btn"],[1,"form-preview"],[1,"wine-image"],["alt","wine-image",3,"src"],[1,"wine-description"],[1,"eng-primary"],[1,"eng-primary","vintage-year"],[1,"geo-primary"]],template:function(r,e){r&1&&(u(0,"div",0)(1,"form",1),M("ngSubmit",function(){return e.onSubmit()}),u(2,"div",2)(3,"label",3),l(4,"\u10E6\u10D5\u10D8\u10DC\u10D8\u10E1 \u10D3\u10D0\u10E1\u10D0\u10EE\u10D4\u10DA\u10D4\u10D1\u10D0 (\u10D8\u10DC\u10D2\u10DA\u10D8\u10E1\u10E3\u10E0\u10D0\u10D3)"),n(),s(5,"input",4),D(6,N,2,0,"small"),n(),u(7,"div",2)(8,"label",5),l(9,"\u10D2\u10D0\u10DB\u10DD\u10E8\u10D5\u10D4\u10D1\u10D8\u10E1 \u10EC\u10D4\u10DA\u10D8"),n(),s(10,"input",6),D(11,q,2,0,"small"),n(),u(12,"div",2)(13,"label",7),l(14,"\u10E4\u10D0\u10E1\u10D8 \u20BE"),n(),s(15,"input",8),D(16,B,3,0)(17,j,2,0,"small"),n(),u(18,"div",2)(19,"label",9),l(20,"\u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0"),n(),s(21,"input",10),D(22,V,3,0)(23,G,2,0,"small"),n(),u(24,"div",2)(25,"label",11),l(26,"\u10E4\u10DD\u10E2\u10DD\u10E1 \u10DA\u10D8\u10DC\u10D9\u10D8"),n(),s(27,"input",12),D(28,R,3,0)(29,z,2,0,"small"),n(),u(30,"div",2)(31,"label",13),l(32,"\u10DB\u10DD\u10D9\u10DA\u10D4 \u10D0\u10E6\u10EC\u10D4\u10E0\u10D0"),n(),s(33,"textarea",14),n(),D(34,L,2,1,"div",15)(35,H,2,1,"div",16),u(36,"button",17)(37,"span"),l(38," \u10E6\u10D5\u10D8\u10DC\u10D8\u10E1 \u10D3\u10D0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D0 "),n()()(),u(39,"div",18)(40,"div",19),D(41,J,1,1,"img",20),n(),u(42,"div",21)(43,"h5",22),l(44),n(),D(45,K,2,1,"p",23)(46,X,2,0,"p",24)(47,Z,2,1,"p",22),n()()()),r&2&&(t(),E("formGroup",e.addWineForm),t(4),p("is-invalid",(e.name==null?null:e.name.touched)&&(e.name==null?null:e.name.invalid)),t(),o(e.name!=null&&e.name.touched&&(!(e.name==null||e.name.errors==null)&&e.name.errors.required)?6:-1),t(4),p("is-invalid",(e.vintageYear==null?null:e.vintageYear.touched)&&(e.vintageYear==null?null:e.vintageYear.invalid)),t(),o(e.vintageYear!=null&&e.vintageYear.touched&&(!(e.vintageYear==null||e.vintageYear.errors==null)&&e.vintageYear.errors.required)?11:-1),t(4),p("is-invalid",(e.price==null?null:e.price.touched)&&(e.price==null?null:e.price.invalid)),t(),o(e.price!=null&&e.price.touched&&(!(e.price==null||e.price.errors==null)&&e.price.errors.required)?16:-1),t(),o(e.price!=null&&e.price.touched&&(!(e.price==null||e.price.errors==null)&&e.price.errors.invalidNumber)?17:-1),t(4),p("is-invalid",(e.stockQuantity==null?null:e.stockQuantity.touched)&&(e.stockQuantity==null?null:e.stockQuantity.invalid)),t(),o(e.stockQuantity!=null&&e.stockQuantity.touched&&(!(e.stockQuantity==null||e.stockQuantity.errors==null)&&e.stockQuantity.errors.required)?22:-1),t(),o(e.stockQuantity!=null&&e.stockQuantity.touched&&(!(e.stockQuantity==null||e.stockQuantity.errors==null)&&e.stockQuantity.errors.invalidNumber)?23:-1),t(4),p("is-invalid",(e.imageUrl==null?null:e.imageUrl.touched)&&(e.imageUrl==null?null:e.imageUrl.invalid)),t(),o(e.imageUrl!=null&&e.imageUrl.touched&&(!(e.imageUrl==null||e.imageUrl.errors==null)&&e.imageUrl.errors.required)?28:-1),t(),o(e.imageUrl!=null&&e.imageUrl.dirty&&(!(e.imageUrl==null||e.imageUrl.errors==null)&&e.imageUrl.errors.invalidUrl)?29:-1),t(5),o(e.errorMessage?34:-1),t(),o(e.successMessage?35:-1),t(),p("is-disabled",e.addWineForm.invalid),t(5),o(e.imageUrl!=null&&e.imageUrl.value?41:-1),t(3),v(" ",e.name==null?null:e.name.value," "),t(),o(e.vintageYear!=null&&e.vintageYear.value?45:-1),t(),o(e.name!=null&&e.name.value&&(e.vintageYear!=null&&e.vintageYear.value)?46:-1),t(),o(e.price!=null&&e.price.value?47:-1))},dependencies:[T,O,w,k,P,U,Y,F,W],styles:[".wrapper[_ngcontent-%COMP%]{padding:80px 20px 0;display:flex;align-items:center;min-height:80vh}.wrapper[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 768px){.wrapper[_ngcontent-%COMP%]{padding:20px 40px;gap:10%}.wrapper[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:45%}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:45%;display:flex;gap:4%}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{width:28%;height:100%;display:flex;align-items:center}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > img[_ngcontent-%COMP%]{width:100%}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{width:68%;display:flex;flex-direction:column;justify-content:center}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type   .vintage-year[_ngcontent-%COMP%]{background-color:#4c0027;padding-top:5px;width:60px;text-align:center;color:#fff;border-radius:8px}}"]});let i=a;return i})();export{re as AddWineComponent};
