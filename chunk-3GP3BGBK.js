import{a as S,b as p,c as w,d as P,f as U,g as O,h as k,i as F,j as Y,l as Q}from"./chunk-WECY6KH3.js";import{a as I}from"./chunk-453QV7ZA.js";import{a as T}from"./chunk-ULB6RSTB.js";import{c as A,e as W}from"./chunk-M76TIQXJ.js";import"./chunk-2R37SUTI.js";import{c as b}from"./chunk-42V5O47K.js";import{$a as E,Ab as v,Gb as M,Ia as h,Na as t,Oa as f,Za as D,bb as c,db as o,ea as _,hb as u,ib as n,jb as m,pb as y,qb as g,yb as l}from"./chunk-ZZK2NXPU.js";function N(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n())}function q(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n())}function B(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n(),m(2,"br"))}function L(i,a){i&1&&(u(0,"small"),l(1,"\u10E4\u10D0\u10E1\u10D8 \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 0-\u10D6\u10D4 \u10DB\u10D4\u10E2\u10D8"),n())}function j(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n(),m(2,"br"))}function V(i,a){i&1&&(u(0,"small"),l(1,"\u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0 \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 0-\u10D6\u10D4 \u10DB\u10D4\u10E2\u10D8"),n())}function G(i,a){i&1&&(u(0,"small"),l(1,"\u10D4\u10E1 \u10D5\u10D4\u10DA\u10D8 \u10E1\u10D0\u10D5\u10D0\u10DA\u10D3\u10D4\u10D1\u10E3\u10DA\u10DD\u10D0"),n(),m(2,"br"))}function R(i,a){i&1&&(u(0,"small"),l(1,"\u10DA\u10D8\u10DC\u10D9\u10D8 \u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8\u10D0"),n())}function z(i,a){if(i&1&&(u(0,"div",15),l(1),n()),i&2){let d=g();t(),v(" ",d.errorMessage," ")}}function H(i,a){if(i&1&&(u(0,"div",16),l(1),n()),i&2){let d=g();t(),v(" ",d.successMessage," ")}}function J(i,a){if(i&1&&m(0,"img",20),i&2){let d=g();E("src",d.imageUrl==null?null:d.imageUrl.value,h)}}function K(i,a){if(i&1&&(u(0,"p",23),l(1),n()),i&2){let d=g();t(),v(" ",d.vintageYear==null?null:d.vintageYear.value," ")}}function X(i,a){i&1&&(u(0,"p",24),l(1," \u10E1\u10D0\u10D6\u10D0\u10DC\u10DD\u10E1 \u10E6\u10D5\u10D8\u10DC\u10DD "),n())}function Z(i,a){if(i&1&&(u(0,"p",22),l(1),n()),i&2){let d=g();t(),v(" ",d.price==null?null:d.price.value," \u20BE ")}}function $(i,a){i&1&&m(0,"app-loading")}var oe=(()=>{let a=class a{constructor(s,r,e,C){this.fb=s,this.wineService=r,this.route=e,this.router=C,this.successMessage=null,this.errorMessage=null,this.isLoading=!1,this.editMode=!1,this.wineId=null}ngOnInit(){this.initAddWineForm(),this.route.paramMap.subscribe(s=>{let r=s.get("id");r&&(this.editMode=!0,this.wineId=+r,this.loadWineData(this.wineId))})}initAddWineForm(){this.addWineForm=this.fb.group({name:["",p.required],vintageYear:["",p.required],stockQuantity:["",[p.required,p.min(1)]],price:["",[p.required,p.min(1)]],description:[""],imageUrl:["",p.required]})}loadWineData(s){this.wineService.getWineById(s).subscribe(r=>{this.addWineForm.patchValue({name:r.name,vintageYear:r.vintageYear,stockQuantity:r.stockQuantity,price:r.price,description:r.description,imageUrl:r.imageUrl})})}get name(){return this.addWineForm.get("name")}get vintageYear(){return this.addWineForm.get("vintageYear")}get stockQuantity(){return this.addWineForm.get("stockQuantity")}get price(){return this.addWineForm.get("price")}get description(){return this.addWineForm.get("description")}get imageUrl(){return this.addWineForm.get("imageUrl")}onSubmit(){if(this.addWineForm.valid){this.isLoading=!0,this.successMessage=null,this.errorMessage=null;let s=this.addWineForm.value;this.editMode&&this.wineId?this.wineService.updateWine(this.wineId,s).subscribe(()=>{this.isLoading=!1,this.successMessage="Wine updated successfully!",this.router.navigate(["/admin-products"])},r=>{this.isLoading=!1,this.errorMessage="Error updating wine. Please try again."}):this.wineService.addWine(s).subscribe(()=>{this.isLoading=!1,this.successMessage="Wine added successfully!",this.initAddWineForm()},r=>{this.isLoading=!1,this.errorMessage="Error adding wine. Please try again."})}}};a.\u0275fac=function(r){return new(r||a)(f(Y),f(I),f(A),f(W))},a.\u0275cmp=_({type:a,selectors:[["app-add-wine"]],standalone:!0,features:[M],decls:48,vars:29,consts:[[1,"wrapper","geo-secondary"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","formControlName","name","id","name",1,"form-control"],["for","year"],["type","number","formControlName","vintageYear","id","year",1,"form-control"],["for","price"],["type","number","formControlName","price","id","price",1,"form-control"],["for","quantity"],["type","number","formControlName","stockQuantity","id","quantity",1,"form-control"],["for","imageUrl"],["type","text","formControlName","imageUrl","id","imageUrl",1,"form-control"],["for","description"],["formControlName","description","id","description","rows","3",1,"form-control"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["type","submit",1,"submit-button"],[1,"form-preview"],[1,"wine-image"],["alt","wine-image",3,"src"],[1,"wine-description"],[1,"eng-primary"],[1,"eng-primary","vintage-year"],[1,"geo-primary"]],template:function(r,e){r&1&&(u(0,"div",0)(1,"form",1),y("ngSubmit",function(){return e.onSubmit()}),u(2,"div",2)(3,"label",3),l(4,"\u10E6\u10D5\u10D8\u10DC\u10D8\u10E1 \u10D3\u10D0\u10E1\u10D0\u10EE\u10D4\u10DA\u10D4\u10D1\u10D0 (\u10D8\u10DC\u10D2\u10DA\u10D8\u10E1\u10E3\u10E0\u10D0\u10D3)"),n(),m(5,"input",4),D(6,N,2,0,"small"),n(),u(7,"div",2)(8,"label",5),l(9,"\u10D2\u10D0\u10DB\u10DD\u10E8\u10D5\u10D4\u10D1\u10D8\u10E1 \u10EC\u10D4\u10DA\u10D8"),n(),m(10,"input",6),D(11,q,2,0,"small"),n(),u(12,"div",2)(13,"label",7),l(14,"\u10E4\u10D0\u10E1\u10D8 \u20BE"),n(),m(15,"input",8),D(16,B,3,0)(17,L,2,0,"small"),n(),u(18,"div",2)(19,"label",9),l(20,"\u10E0\u10D0\u10DD\u10D3\u10D4\u10DC\u10DD\u10D1\u10D0"),n(),m(21,"input",10),D(22,j,3,0)(23,V,2,0,"small"),n(),u(24,"div",2)(25,"label",11),l(26,"\u10E4\u10DD\u10E2\u10DD\u10E1 \u10DA\u10D8\u10DC\u10D9\u10D8"),n(),m(27,"input",12),D(28,G,3,0)(29,R,2,0,"small"),n(),u(30,"div",2)(31,"label",13),l(32,"\u10DB\u10DD\u10D9\u10DA\u10D4 \u10D0\u10E6\u10EC\u10D4\u10E0\u10D0"),n(),m(33,"textarea",14),n(),D(34,z,2,1,"div",15)(35,H,2,1,"div",16),u(36,"button",17),l(37,"\u10E6\u10D5\u10D8\u10DC\u10D8\u10E1 \u10D3\u10D0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D0"),n()(),u(38,"div",18)(39,"div",19),D(40,J,1,1,"img",20),n(),u(41,"div",21)(42,"h5",22),l(43),n(),D(44,K,2,1,"p",23)(45,X,2,0,"p",24)(46,Z,2,1,"p",22),n()()(),D(47,$,1,0,"app-loading")),r&2&&(t(),E("formGroup",e.addWineForm),t(4),c("is-invalid",(e.name==null?null:e.name.touched)&&(e.name==null?null:e.name.invalid)),t(),o(e.name!=null&&e.name.touched&&(!(e.name==null||e.name.errors==null)&&e.name.errors.required)?6:-1),t(4),c("is-invalid",(e.vintageYear==null?null:e.vintageYear.touched)&&(e.vintageYear==null?null:e.vintageYear.invalid)),t(),o(e.vintageYear!=null&&e.vintageYear.touched&&(!(e.vintageYear==null||e.vintageYear.errors==null)&&e.vintageYear.errors.required)?11:-1),t(4),c("is-invalid",(e.price==null?null:e.price.touched)&&(e.price==null?null:e.price.invalid)),t(),o(e.price!=null&&e.price.touched&&(!(e.price==null||e.price.errors==null)&&e.price.errors.required)?16:-1),t(),o(e.price!=null&&e.price.touched&&(!(e.price==null||e.price.errors==null)&&e.price.errors.invalidNumber)?17:-1),t(4),c("is-invalid",(e.stockQuantity==null?null:e.stockQuantity.touched)&&(e.stockQuantity==null?null:e.stockQuantity.invalid)),t(),o(e.stockQuantity!=null&&e.stockQuantity.touched&&(!(e.stockQuantity==null||e.stockQuantity.errors==null)&&e.stockQuantity.errors.required)?22:-1),t(),o(e.stockQuantity!=null&&e.stockQuantity.touched&&(!(e.stockQuantity==null||e.stockQuantity.errors==null)&&e.stockQuantity.errors.invalidNumber)?23:-1),t(4),c("is-invalid",(e.imageUrl==null?null:e.imageUrl.touched)&&(e.imageUrl==null?null:e.imageUrl.invalid)),t(),o(e.imageUrl!=null&&e.imageUrl.touched&&(!(e.imageUrl==null||e.imageUrl.errors==null)&&e.imageUrl.errors.required)?28:-1),t(),o(e.imageUrl!=null&&e.imageUrl.dirty&&(!(e.imageUrl==null||e.imageUrl.errors==null)&&e.imageUrl.errors.invalidUrl)?29:-1),t(5),o(e.errorMessage?34:-1),t(),o(e.successMessage?35:-1),t(),c("is-disabled",e.addWineForm.invalid),t(4),o(e.imageUrl!=null&&e.imageUrl.value?40:-1),t(3),v(" ",e.name==null?null:e.name.value," "),t(),o(e.vintageYear!=null&&e.vintageYear.value?44:-1),t(),o(e.name!=null&&e.name.value&&(e.vintageYear!=null&&e.vintageYear.value)?45:-1),t(),o(e.price!=null&&e.price.value?46:-1),t(),o(e.isLoading?47:-1))},dependencies:[Q,U,S,O,w,P,k,F,b,T],styles:[".wrapper[_ngcontent-%COMP%]{padding:80px 20px 0;display:flex;align-items:center;min-height:80vh}.wrapper[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 768px){.wrapper[_ngcontent-%COMP%]{padding:20px 40px;gap:10%}.wrapper[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:45%}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:45%;display:flex;gap:4%}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{width:28%;height:100%;display:flex;align-items:center}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > img[_ngcontent-%COMP%]{width:100%}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{width:68%;display:flex;flex-direction:column;justify-content:center}.wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type   .vintage-year[_ngcontent-%COMP%]{background-color:#4c0027;padding-top:5px;width:60px;text-align:center;color:#fff;border-radius:8px}}"]});let i=a;return i})();export{oe as AddWineComponent};
