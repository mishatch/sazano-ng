import{a as G}from"./chunk-SY4Q7D4V.js";import{a as k}from"./chunk-3G3XRZH5.js";import{a as F,b as v,c as N,d as M,f as B,g as O,h as T,i as q,j as w,l as D}from"./chunk-ZTYZG2FQ.js";import{a as V,b as j}from"./chunk-5MCDAW33.js";import{a as U}from"./chunk-O3OG6XD3.js";import"./chunk-XIY5KZ7M.js";import"./chunk-OWIOO5ZG.js";import{b as I,c as b,e as L}from"./chunk-QSWAGUUE.js";import{Ab as _,Bb as m,Hb as E,Jb as s,Kb as p,Oa as n,Pa as y,_a as h,ab as t,cb as g,eb as c,fa as P,ib as a,jb as r,kb as f,qb as S,zb as l}from"./chunk-VVLVZ75C.js";function A(i,o){i&1&&(a(0,"small",2),l(1),s(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(2,2,"auth.required-field")," "))}function z(i,o){i&1&&(a(0,"small",2),l(1),s(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(2,2,"auth.required-field")," "))}function R(i,o){i&1&&(a(0,"div",12),l(1),s(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(2,2,"profile.email-danger-alert")," "))}function H(i,o){i&1&&(a(0,"small",2),l(1),s(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(2,2,"auth.required-field")," "))}function J(i,o){i&1&&(a(0,"small",2),l(1),s(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(2,2,"auth.email-invalid")," "))}function K(i,o){i&1&&(a(0,"small",2),l(1),s(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(2,2,"auth.required-field")," "))}function Q(i,o){i&1&&(a(0,"small",2),l(1),s(2,"translate"),r()),i&2&&(t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(2,2,"auth.phone-invalid")," "))}function W(i,o){i&1&&f(0,"app-loading")}var oe=(()=>{let o=class o{constructor(d,u,e,C){this.fb=d,this.authService=u,this.profileService=e,this.storageService=C,this.isLoading=!1}ngOnInit(){this.getUserInfo(),this.initProfileForm()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}onSubmit(){if(this.profileForm.valid){this.isLoading=!0;let d={name:this.profileForm.get("name")?.value,surName:this.profileForm.get("surname")?.value,phoneNumber:this.profileForm.get("phone")?.value,email:this.profileForm.get("email")?.value};this.profileService.setUserInfo(d),this.storageService.setUserData(d),this.subscription=this.profileService.updateUserInfo(d).subscribe(()=>{this.isLoading=!1},u=>{this.isLoading=!1})}}get name(){return this.profileForm.get("name")}get userSurname(){return this.profileForm.get("surname")}get userPhone(){return this.profileForm.get("phone")}get userEmail(){return this.profileForm.get("email")}initProfileForm(){this.profileForm=this.fb.group({name:[this.userName,v.required],surname:[this.surname,v.required],email:[this.email,[v.required,v.email]],phone:[this.phone,[v.required,G]]})}getUserInfo(){let d=this.authService.decodeToken(),u=this.storageService.getUserData();u?(this.userName=u.userName,this.surname=u.userSurname,this.email=u.userEmail,this.phone=u.userPhone):(this.userName=d.name,this.surname=d.surName,this.email=d.email,this.phone=d.phoneNumber)}};o.\u0275fac=function(u){return new(u||o)(y(w),y(U),y(V),y(j))},o.\u0275cmp=P({type:o,selectors:[["app-profile-info"]],standalone:!0,features:[E],decls:38,vars:41,consts:[[1,"wrapper"],[1,"mobile-hr"],[3,"appLangClass"],[1,"desktop-hr"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name",3,"appLangClass"],["type","text","id","name","formControlName","name",1,"form-control","eng-secondary"],["for","surname",3,"appLangClass"],["type","text","id","surname","formControlName","surname",1,"form-control","eng-secondary"],["for","email",3,"appLangClass"],["type","email","id","email","formControlName","email",1,"form-control","eng-secondary"],["role","alert",1,"alert","alert-danger",3,"appLangClass"],["for","phone",3,"appLangClass"],["type","number","id","phone","formControlName","phone",1,"form-control","eng-primary"],["type","submit",1,"primary-btm","submit-button",3,"appLangClass"]],template:function(u,e){u&1&&(a(0,"div",0),f(1,"hr",1),a(2,"h5",2),l(3),s(4,"translate"),r(),f(5,"hr",3),a(6,"form",4),S("ngSubmit",function(){return e.onSubmit()}),a(7,"div",5)(8,"label",6),l(9),s(10,"translate"),r(),f(11,"input",7),h(12,A,3,4,"small",2),r(),a(13,"div",5)(14,"label",8),l(15),s(16,"translate"),r(),f(17,"input",9),h(18,z,3,4,"small",2),r(),a(19,"div",5)(20,"label",10),l(21),s(22,"translate"),r(),f(23,"input",11),h(24,R,3,4,"div",12)(25,H,3,4,"small",2)(26,J,3,4,"small",2),r(),a(27,"div",5)(28,"label",13),l(29),s(30,"translate"),r(),f(31,"input",14),h(32,K,3,4,"small",2)(33,Q,3,4,"small",2),r(),a(34,"button",15),l(35),s(36,"translate"),r()(),h(37,W,1,0,"app-loading"),r()),u&2&&(n(2),t("appLangClass","geo-primary, eng-primary, ru-primary"),n(),m(" ",p(4,29,"profile.account-info")," "),n(3),t("formGroup",e.profileForm),n(2),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),_(p(10,31,"auth.name")),n(2),g("is-invalid",(e.name==null?null:e.name.touched)&&(e.name==null?null:e.name.invalid)),n(),c(e.name!=null&&e.name.touched&&(!(e.name==null||e.name.errors==null)&&e.name.errors.required)?12:-1),n(2),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(16,33,"auth.surname")," "),n(2),g("is-invalid",(e.userSurname==null?null:e.userSurname.touched)&&(e.userSurname==null?null:e.userSurname.invalid)),n(),c(e.userSurname!=null&&e.userSurname.touched&&(!(e.userSurname==null||e.userSurname.errors==null)&&e.userSurname.errors.required)?18:-1),n(2),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(22,35,"auth.email")," "),n(2),g("is-invalid",((e.userEmail==null?null:e.userEmail.touched)||(e.userEmail==null?null:e.userEmail.dirty))&&(e.userEmail==null?null:e.userEmail.invalid)),n(),c(e.userEmail!=null&&e.userEmail.touched?24:-1),n(),c(e.userEmail!=null&&e.userEmail.touched&&(!(e.userEmail==null||e.userEmail.errors==null)&&e.userEmail.errors.required)?25:e.userEmail!=null&&e.userEmail.dirty&&(!(e.userEmail==null||e.userEmail.errors==null)&&e.userEmail.errors.email)?26:-1),n(3),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(30,37,"auth.phone")," "),n(2),g("is-invalid",((e.userPhone==null?null:e.userPhone.touched)||(e.userPhone==null?null:e.userPhone.dirty))&&(e.userPhone==null?null:e.userPhone.invalid)),n(),c(e.userPhone!=null&&e.userPhone.touched&&(!(e.userPhone==null||e.userPhone.errors==null)&&e.userPhone.errors.required)?32:e.userPhone!=null&&e.userPhone.dirty&&(!(e.userPhone==null||e.userPhone.errors==null)&&e.userPhone.errors.invalidGeorgianPhone)?33:-1),n(2),g("is-disabled",e.profileForm.invalid),t("appLangClass","geo-secondary, eng-secondary, ru-secondary"),n(),m(" ",p(36,39,"auth.save")," "),n(2),c(e.isLoading?37:-1))},dependencies:[D,B,F,O,N,M,T,q,k,L,b,I],styles:["h5[_ngcontent-%COMP%]{font-size:18px}.desktop-hr[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 1024px){form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:40%}form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:40%}form[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]{margin-top:20px}.desktop-hr[_ngcontent-%COMP%]{display:block}.mobile-hr[_ngcontent-%COMP%]{display:none}}@media screen and (min-width: 1920px){h5[_ngcontent-%COMP%]{font-size:25px}}"]});let i=o;return i})();export{oe as ProfileInfoComponent};
